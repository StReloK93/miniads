import{d as R,h,y as S,c,B as u,M as v,R as m,a as g,w as V,T as E,e as o,U as L,O as _,G as y,f as P,E as T}from"./index-CTwd-zWN.js";import{c as $}from"./createLucideIcon-tcSCCwuj.js";const k=$("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),j={class:"overflow-hidden grid grid-rows-[auto_1fr] h-full"},q={class:"p-2 text-sm flex flex-wrap items-center gap-2 mb-2"},D={class:"text-(--z-muted-text)"},F=["onClick"],G={class:"overflow-hidden relative"},M=["onClick"],O={class:"font-medium text-(--z-primary)"},H=R({__name:"CategorySelector",props:{categories:{},activeCategoryId:{}},emits:["selectCategory"],setup(C,{emit:x}){const r=C,w=x,n=h([r.categories]),i=h([]),d=h("slide-in"),z=L(()=>n.value[n.value.length-1]);function p(e,a,t=[]){for(const s of e){const l=[...t,s];if(s.id===a)return l;if(s.children?.length){const f=p(s.children,a,l);if(f)return f}}return null}function B(e){const a=p(r.categories,e);if(!a)return;d.value="slide-in",i.value=a.slice(0,-1);const t=[r.categories];for(const l of i.value)l.children?.length&&t.push(l.children);const s=a[a.length-1];!s.is_page&&s.children?.length&&(i.value.push(s),t.push(s.children)),n.value=t}function b(e){if(e.is_page){w("selectCategory",e);return}e.children?.length&&(d.value="slide-in",i.value.push(e),n.value.push(e.children))}function N(e){d.value="slide-out",e===void 0?n.value.length>1&&(n.value.pop(),i.value.pop()):(i.value=i.value.slice(0,e+1),n.value=n.value.slice(0,e+2))}function I(){d.value="slide-out",i.value=[],n.value=[r.categories]}return S(()=>[r.activeCategoryId,r.categories],([e,a])=>{e&&(!a||a.length===0||B(e))},{immediate:!0}),(e,a)=>(o(),c("div",j,[u("div",q,[u("span",{class:"cursor-pointer active:text-black",onClick:I}," Bo'limlar "),(o(!0),c(v,null,m(i.value,(t,s)=>(o(),c(v,{key:t.id},[u("span",D,[g(_(k),{class:"size-4 text-(--z-muted-text)"})]),u("span",{class:"cursor-pointer text-(--z-primary) active:text-black",onClick:l=>N(s)},y(t.name),9,F)],64))),128))]),u("div",G,[g(E,{name:d.value,mode:"out-in"},{default:V(()=>[(o(),c("ul",{key:n.value.length,class:"divide-y divide-(--z-border)"},[(o(!0),c(v,null,m(z.value,t=>(o(),c("li",{key:t.id,onClick:s=>b(t),class:"flex items-center justify-between p-2 cursor-pointer active:bg-(--z-card) rounded-md"},[u("span",O,y(t.name),1),t.is_page?T("",!0):(o(),P(_(k),{key:0,class:"size-4 text-(--z-muted-text)"}))],8,M))),128))]))]),_:1},8,["name"])])]))}});export{H as _};
