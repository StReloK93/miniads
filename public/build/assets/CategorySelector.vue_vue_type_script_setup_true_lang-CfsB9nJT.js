import{d as S,h as f,y as V,c,B as u,M as h,R as p,a as m,w as E,T as I,e as i,U as P,O as _,G as y,f as T,E as $}from"./index-BYjx1Fp_.js";import{C}from"./chevron-right-CTtI7n-s.js";const j={class:"overflow-hidden grid grid-rows-[auto_1fr] h-full select-none"},D={class:"py-2 text-sm flex flex-wrap items-center gap-1"},F={class:"font-bold"},G=["onClick"],L={class:"overflow-hidden relative"},M=["onClick"],q=S({__name:"CategorySelector",props:{categories:{},activeCategoryId:{}},emits:["selectCategory"],setup(k,{emit:w}){const l=k,B=w,a=f([l.categories]),o=f([]),d=f("slide-in"),b=P(()=>a.value[a.value.length-1]);function v(e,n,t=[]){for(const s of e){const r=[...t,s];if(s.id===n)return r;if(s.children?.length){const g=v(s.children,n,r);if(g)return g}}return null}function x(e){const n=v(l.categories,e);if(!n)return;d.value="slide-in",o.value=n.slice(0,-1);const t=[l.categories];for(const r of o.value)r.children?.length&&t.push(r.children);const s=n[n.length-1];!s.is_page&&s.children?.length&&(o.value.push(s),t.push(s.children)),a.value=t}function z(e){if(e.is_page){B("selectCategory",e);return}e.children?.length&&(d.value="slide-in",o.value.push(e),a.value.push(e.children))}function N(e){d.value="slide-out",e===void 0?a.value.length>1&&(a.value.pop(),o.value.pop()):(o.value=o.value.slice(0,e+1),a.value=a.value.slice(0,e+2))}function R(){d.value="slide-out",o.value=[],a.value=[l.categories]}return V(()=>[l.activeCategoryId,l.categories],([e,n])=>{e&&(!n||n.length===0||x(e))},{immediate:!0}),(e,n)=>(i(),c("div",j,[u("div",D,[u("span",{class:"font-bold",onClick:R}," Barchasi "),(i(!0),c(h,null,p(o.value,(t,s)=>(i(),c(h,{key:t.id},[u("span",F,[m(_(C),{class:"size-3 font-bold"})]),u("span",{class:"font-bold",onClick:r=>N(s)},y(t.name),9,G)],64))),128))]),u("div",L,[m(I,{name:d.value,mode:"out-in"},{default:E(()=>[(i(),c("ul",{key:a.value.length,class:"divide-y divide-(--z-muted)"},[(i(!0),c(h,null,p(b.value,t=>(i(),c("li",{key:t.id,onClick:s=>z(t),class:"flex items-center justify-between py-2 active:bg-(--z-card) rounded-md"},[u("span",null,y(t.name),1),t.is_page?$("",!0):(i(),T(_(C),{key:0,class:"size-4"}))],8,M))),128))]))]),_:1},8,["name"])])]))}});export{q as _};
