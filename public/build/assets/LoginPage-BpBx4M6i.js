import{l as i,o as l,V as c,e as u,c as g,B as s,h as m,u as d}from"./index-DvgdEg0x.js";const p={class:"h-dvh flex items-center justify-center flex-col"},A={__name:"LoginPage",setup(h){const r=d(),{getUser:o}=i(),a=m(null);l(()=>{const e=document.createElement("script");e.async=!0,e.src=`https://telegram.org/js/telegram-widget.js?66v=${new Date().getTime()}`,e.setAttribute("data-telegram-login","NavoElonBot"),e.setAttribute("data-size","large"),e.setAttribute("data-radius","2"),e.setAttribute("data-onauth","onTelegramAuth(user)"),e.setAttribute("data-request-access","write"),a.value.appendChild(e),window.onTelegramAuth=t=>{n(t)}});async function n(e){await c.post("telegram/widget-sign-in",e).then(async t=>{localStorage.setItem("token",`${t.data.type} ${t.data.token}`),await o(),r.push({name:"home"})}).catch(t=>{console.error("Widget login xatosi:",t)})}return(e,t)=>(u(),g("main",p,[t[0]||(t[0]=s("h3",{class:"text-tertiary font-semibold text-xl py-4"},"Dasturga kiring",-1)),s("div",{ref_key:"telegramWrapper",ref:a},null,512)]))}};export{A as default};
