import{_ as W}from"./BaseButton.vue_vue_type_script_setup_true_lang-BSbPwuoc.js";import{p as J,f as Z,t as w}from"./Helpers-5Npp2uYL.js";import{d as aa,o as ea,c as x,O as r,B as d,a as A,w as F,K as G,G as L,F as N,E as R,M as j,R as V,Y as ta,b as la,W as sa,h as U,p as na,e as C,f as ia}from"./index-BYjx1Fp_.js";import{P as oa}from"./ProductRepo-CsMfMe1b.js";import{e as ra,c as ca,m as k,a as da,s as Y,b as fa,d as Q,S as ua,M as ma,f as pa}from"./swiper-vue-BRsJyAS0.js";import{F as X}from"./FavoriteRepo-Bl0hA3Mm.js";import{c as ga}from"./createLucideIcon-nACnfReH.js";import{H as va}from"./heart-DrxJ4hzU.js";const ha=ga("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);function ba(a,M,s,b){return a.params.createElements&&Object.keys(b).forEach(i=>{if(!s[i]&&s.auto===!0){let g=ra(a.el,`.${b[i]}`)[0];g||(g=ca("div",b[i]),g.className=b[i],a.el.append(g)),s[i]=g,M[i]=g}}),s}function D(a=""){return`.${a.trim().replace(/([\.:!+\/()[\]#>~*^$|=,'"@{}\\])/g,"\\$1").replace(/ /g,".")}`}function ya({swiper:a,extendParams:M,on:s,emit:b}){const i="swiper-pagination";M({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),a.pagination={el:null,bullets:[]};let g,y=0;function S(){return!a.params.pagination.el||!a.pagination.el||Array.isArray(a.pagination.el)&&a.pagination.el.length===0}function $(e,t){const{bulletActiveClass:l}=a.params.pagination;e&&(e=e[`${t==="prev"?"previous":"next"}ElementSibling`],e&&(e.classList.add(`${l}-${t}`),e=e[`${t==="prev"?"previous":"next"}ElementSibling`],e&&e.classList.add(`${l}-${t}-${t}`)))}function o(e,t,l){if(e=e%l,t=t%l,t===e+1)return"next";if(t===e-1)return"previous"}function P(e){const t=e.target.closest(D(a.params.pagination.bulletClass));if(!t)return;e.preventDefault();const l=Q(t)*a.params.slidesPerGroup;if(a.params.loop){if(a.realIndex===l)return;const n=o(a.realIndex,l,a.slides.length);n==="next"?a.slideNext():n==="previous"?a.slidePrev():a.slideToLoop(l)}else a.slideTo(l)}function u(){const e=a.rtl,t=a.params.pagination;if(S())return;let l=a.pagination.el;l=k(l);let n,v;const B=a.virtual&&a.params.virtual.enabled?a.virtual.slides.length:a.slides.length,q=a.params.loop?Math.ceil(B/a.params.slidesPerGroup):a.snapGrid.length;if(a.params.loop?(v=a.previousRealIndex||0,n=a.params.slidesPerGroup>1?Math.floor(a.realIndex/a.params.slidesPerGroup):a.realIndex):typeof a.snapIndex<"u"?(n=a.snapIndex,v=a.previousSnapIndex):(v=a.previousIndex||0,n=a.activeIndex||0),t.type==="bullets"&&a.pagination.bullets&&a.pagination.bullets.length>0){const c=a.pagination.bullets;let _,h,I;if(t.dynamicBullets&&(g=fa(c[0],a.isHorizontal()?"width":"height"),l.forEach(f=>{f.style[a.isHorizontal()?"width":"height"]=`${g*(t.dynamicMainBullets+4)}px`}),t.dynamicMainBullets>1&&v!==void 0&&(y+=n-(v||0),y>t.dynamicMainBullets-1?y=t.dynamicMainBullets-1:y<0&&(y=0)),_=Math.max(n-y,0),h=_+(Math.min(c.length,t.dynamicMainBullets)-1),I=(h+_)/2),c.forEach(f=>{const m=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(p=>`${t.bulletActiveClass}${p}`)].map(p=>typeof p=="string"&&p.includes(" ")?p.split(" "):p).flat();f.classList.remove(...m)}),l.length>1)c.forEach(f=>{const m=Q(f);m===n?f.classList.add(...t.bulletActiveClass.split(" ")):a.isElement&&f.setAttribute("part","bullet"),t.dynamicBullets&&(m>=_&&m<=h&&f.classList.add(...`${t.bulletActiveClass}-main`.split(" ")),m===_&&$(f,"prev"),m===h&&$(f,"next"))});else{const f=c[n];if(f&&f.classList.add(...t.bulletActiveClass.split(" ")),a.isElement&&c.forEach((m,p)=>{m.setAttribute("part",p===n?"bullet-active":"bullet")}),t.dynamicBullets){const m=c[_],p=c[h];for(let z=_;z<=h;z+=1)c[z]&&c[z].classList.add(...`${t.bulletActiveClass}-main`.split(" "));$(m,"prev"),$(p,"next")}}if(t.dynamicBullets){const f=Math.min(c.length,t.dynamicMainBullets+4),m=(g*f-g)/2-I*g,p=e?"right":"left";c.forEach(z=>{z.style[a.isHorizontal()?p:"top"]=`${m}px`})}}l.forEach((c,_)=>{if(t.type==="fraction"&&(c.querySelectorAll(D(t.currentClass)).forEach(h=>{h.textContent=t.formatFractionCurrent(n+1)}),c.querySelectorAll(D(t.totalClass)).forEach(h=>{h.textContent=t.formatFractionTotal(q)})),t.type==="progressbar"){let h;t.progressbarOpposite?h=a.isHorizontal()?"vertical":"horizontal":h=a.isHorizontal()?"horizontal":"vertical";const I=(n+1)/q;let f=1,m=1;h==="horizontal"?f=I:m=I,c.querySelectorAll(D(t.progressbarFillClass)).forEach(p=>{p.style.transform=`translate3d(0,0,0) scaleX(${f}) scaleY(${m})`,p.style.transitionDuration=`${a.params.speed}ms`})}t.type==="custom"&&t.renderCustom?(Y(c,t.renderCustom(a,n+1,q)),_===0&&b("paginationRender",c)):(_===0&&b("paginationRender",c),b("paginationUpdate",c)),a.params.watchOverflow&&a.enabled&&c.classList[a.isLocked?"add":"remove"](t.lockClass)})}function O(){const e=a.params.pagination;if(S())return;const t=a.virtual&&a.params.virtual.enabled?a.virtual.slides.length:a.grid&&a.params.grid.rows>1?a.slides.length/Math.ceil(a.params.grid.rows):a.slides.length;let l=a.pagination.el;l=k(l);let n="";if(e.type==="bullets"){let v=a.params.loop?Math.ceil(t/a.params.slidesPerGroup):a.snapGrid.length;a.params.freeMode&&a.params.freeMode.enabled&&v>t&&(v=t);for(let B=0;B<v;B+=1)e.renderBullet?n+=e.renderBullet.call(a,B,e.bulletClass):n+=`<${e.bulletElement} ${a.isElement?'part="bullet"':""} class="${e.bulletClass}"></${e.bulletElement}>`}e.type==="fraction"&&(e.renderFraction?n=e.renderFraction.call(a,e.currentClass,e.totalClass):n=`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`),e.type==="progressbar"&&(e.renderProgressbar?n=e.renderProgressbar.call(a,e.progressbarFillClass):n=`<span class="${e.progressbarFillClass}"></span>`),a.pagination.bullets=[],l.forEach(v=>{e.type!=="custom"&&Y(v,n||""),e.type==="bullets"&&a.pagination.bullets.push(...v.querySelectorAll(D(e.bulletClass)))}),e.type!=="custom"&&b("paginationRender",l[0])}function E(){a.params.pagination=ba(a,a.originalParams.pagination,a.params.pagination,{el:"swiper-pagination"});const e=a.params.pagination;if(!e.el)return;let t;typeof e.el=="string"&&a.isElement&&(t=a.el.querySelector(e.el)),!t&&typeof e.el=="string"&&(t=[...document.querySelectorAll(e.el)]),t||(t=e.el),!(!t||t.length===0)&&(a.params.uniqueNavElements&&typeof e.el=="string"&&Array.isArray(t)&&t.length>1&&(t=[...a.el.querySelectorAll(e.el)],t.length>1&&(t=t.find(l=>da(l,".swiper")[0]===a.el))),Array.isArray(t)&&t.length===1&&(t=t[0]),Object.assign(a.pagination,{el:t}),t=k(t),t.forEach(l=>{e.type==="bullets"&&e.clickable&&l.classList.add(...(e.clickableClass||"").split(" ")),l.classList.add(e.modifierClass+e.type),l.classList.add(a.isHorizontal()?e.horizontalClass:e.verticalClass),e.type==="bullets"&&e.dynamicBullets&&(l.classList.add(`${e.modifierClass}${e.type}-dynamic`),y=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),e.type==="progressbar"&&e.progressbarOpposite&&l.classList.add(e.progressbarOppositeClass),e.clickable&&l.addEventListener("click",P),a.enabled||l.classList.add(e.lockClass)}))}function H(){const e=a.params.pagination;if(S())return;let t=a.pagination.el;t&&(t=k(t),t.forEach(l=>{l.classList.remove(e.hiddenClass),l.classList.remove(e.modifierClass+e.type),l.classList.remove(a.isHorizontal()?e.horizontalClass:e.verticalClass),e.clickable&&(l.classList.remove(...(e.clickableClass||"").split(" ")),l.removeEventListener("click",P))})),a.pagination.bullets&&a.pagination.bullets.forEach(l=>l.classList.remove(...e.bulletActiveClass.split(" ")))}s("changeDirection",()=>{if(!a.pagination||!a.pagination.el)return;const e=a.params.pagination;let{el:t}=a.pagination;t=k(t),t.forEach(l=>{l.classList.remove(e.horizontalClass,e.verticalClass),l.classList.add(a.isHorizontal()?e.horizontalClass:e.verticalClass)})}),s("init",()=>{a.params.pagination.enabled===!1?T():(E(),O(),u())}),s("activeIndexChange",()=>{typeof a.snapIndex>"u"&&u()}),s("snapIndexChange",()=>{u()}),s("snapGridLengthChange",()=>{O(),u()}),s("destroy",()=>{H()}),s("enable disable",()=>{let{el:e}=a.pagination;e&&(e=k(e),e.forEach(t=>t.classList[a.enabled?"remove":"add"](a.params.pagination.lockClass)))}),s("lock unlock",()=>{u()}),s("click",(e,t)=>{const l=t.target,n=k(a.pagination.el);if(a.params.pagination.el&&a.params.pagination.hideOnClick&&n&&n.length>0&&!l.classList.contains(a.params.pagination.bulletClass)){if(a.navigation&&(a.navigation.nextEl&&l===a.navigation.nextEl||a.navigation.prevEl&&l===a.navigation.prevEl))return;const v=n[0].classList.contains(a.params.pagination.hiddenClass);b(v===!0?"paginationShow":"paginationHide"),n.forEach(B=>B.classList.toggle(a.params.pagination.hiddenClass))}});const K=()=>{a.el.classList.remove(a.params.pagination.paginationDisabledClass);let{el:e}=a.pagination;e&&(e=k(e),e.forEach(t=>t.classList.remove(a.params.pagination.paginationDisabledClass))),E(),O(),u()},T=()=>{a.el.classList.add(a.params.pagination.paginationDisabledClass);let{el:e}=a.pagination;e&&(e=k(e),e.forEach(t=>t.classList.add(a.params.pagination.paginationDisabledClass))),H()};Object.assign(a.pagination,{enable:K,disable:T,render:O,update:u,init:E,destroy:H})}const Ca={class:"full-page flex flex-col"},xa={key:0,class:"grow relative -mt-[calc(var(--safe-area-top)+var(--spacing)*4)]"},_a={class:"absolute inset-0 overflow-y-auto no-scrollbar"},$a={class:"relative"},ka=["src"],La={class:"pt-5 px-4"},Ba={class:"mb-4 text-xl font-medium"},za={class:"text-(--z-muted-text) text-xs flex gap-2 items-center mb-6"},Aa={class:"capitalize"},Ma={class:"flex items-center gap-1"},Sa={class:"py-1 leading-5 text-sm mb-6"},Pa={key:0,class:"title text-sm mb-2"},Ia={key:1,class:"text-sm divide-y divide-gray-50"},Fa={class:"text-(--z-muted-text)"},Da={class:"flex gap-1.5 font-medium"},Oa={key:0},Ea={key:1,class:"grow"},Ha={key:2,class:"px-4 pt-4 border-t border-(--z-border) flex gap-4"},qa={key:3,class:"px-4 pt-4 border-t border-(--z-border) flex gap-4"},Qa=aa({__name:"ProductPage",setup(a){const M=la(),{data:s,execute:b}=sa(oa.show),i=U(!1);function g($){na()&&window.open(`tel:${$}`)}const y=U(!1);async function S(){s.value&&(y.value=!0,s.value.is_favorite?await X.delete(s.value.id).finally(()=>{y.value=!1}):await X.store(s.value.id).finally(()=>{y.value=!1}),s.value.is_favorite=!s.value.is_favorite)}return ea(async()=>{if(await b(M.params.id),s.value?.images?.length){const $=s.value.images.map(o=>`/storage/${o.src}`);await J($)}setTimeout(()=>{i.value=!0},350)}),($,o)=>{const P=W;return C(),x("section",Ca,[r(s)?(C(),x("aside",xa,[d("article",_a,[d("main",$a,[A(r(ua),{modules:[r(ya)],pagination:"",class:"h-64"},{default:F(()=>[(C(!0),x(j,null,V(r(s)?.images,u=>(C(),ia(r(pa),{key:u.id},{default:F(()=>[d("img",{src:`/storage/${u.src}`,class:"h-full w-full object-cover"},null,8,ka)]),_:2},1024))),128))]),_:1},8,["modules"])]),d("main",La,[d("div",{class:G(["inline-flex items-center gap-1 font-extrabold text-2xl mb-3",{"flex-row-reverse":r(s)?.price_type.position==="left"}])},[d("span",null,L(r(Z)(r(s)?.price)),1),d("span",null,L(r(s)?.price_type.type),1)],2),d("h1",Ba,L(r(s)?.title),1),d("div",za,[d("span",Aa,L(r(w)(r(s)?.created_at)),1),o[2]||(o[2]=d("span",{class:"inline-block w-1 h-1 rounded-full bg-(--z-muted-text)"},null,-1)),o[3]||(o[3]=d("span",{class:"flex items-center gap-1"}," 1.2k ko'rildi ",-1)),o[4]||(o[4]=d("span",{class:"inline-block w-1 h-1 rounded-full bg-(--z-muted-text)"},null,-1)),d("span",Ma,[A(r(ma),{class:"size-3 inline"}),o[1]||(o[1]=N(" Uchquduq ",-1))])]),o[5]||(o[5]=d("h3",{class:"title text-sm"},"Izoh",-1)),d("div",Sa,L(r(s)?.description),1),r(s)?.parameter_values.length?(C(),x("h3",Pa,"Qo'shimcha ma'lumot")):R("",!0),r(s)?.parameter_values.length?(C(),x("aside",Ia,[(C(!0),x(j,null,V(r(s).parameter_values,u=>(C(),x("div",{key:u.id,class:"flex justify-between py-2"},[d("span",Fa,L(u.parameter.title),1),d("main",Da,[d("span",null,L(u.value),1),u.parameter.unit?(C(),x("span",Oa,L(u.parameter.unit),1)):R("",!0)])]))),128))])):R("",!0)])])])):(C(),x("aside",Ea,[...o[6]||(o[6]=[ta('<main class="relative -mt-[calc(var(--safe-area-top)+var(--spacing)*4)]"><div class="skeleton h-64 rounded-none!"></div></main><main class="py-5.5 px-4"><div class="skeleton h-5.5 mb-6 w-24"></div><div class="skeleton h-4.5 w-full mb-5.5"></div><div class="skeleton h-4 w-2/3 mb-7"></div><div class="skeleton h-3 w-12 mb-3"></div><div class="skeleton h-2 w-4/5 mb-3"></div><div class="skeleton h-2 w-full mb-3"></div><div class="skeleton h-2 w-2/3"></div></main>',2)])])),r(s)?(C(),x("aside",Ha,[A(P,{onClick:o[0]||(o[0]=u=>g(r(s)?.phone)),severity:"primary",class:"grow"},{icon:F(()=>[A(r(ha),{class:"size-4 inline"})]),default:F(()=>[o[7]||(o[7]=N(" Qo'ng'iroq qilish ",-1))]),_:1}),A(P,{severity:"secondary",onClick:S,iconOnly:"",class:"aspect-square",loading:y.value},{icon:F(()=>[A(r(va),{class:G(["size-5 inline",{"stroke-red-500 fill-red-500":r(s).is_favorite}])},null,8,["class"])]),_:1},8,["loading"])])):(C(),x("aside",qa,[...o[8]||(o[8]=[d("div",{class:"skeleton h-12 grow"},null,-1),d("div",{class:"skeleton size-12"},null,-1)])]))])}}});export{Qa as default};
